---
layout: post
title:  2015-9-21
date:   2015-9-21 20:44:43
summary:
categories: codewars
tags: js
---

## 第一题

*Description*

> Given a positive integer of up to 16 digits, return true if it is a valid credit card number, and false if it is not.

*My Solution*

{% highlight javascript %}
function validate(n){
  var digits = n.toString().split("");
   var sum =  digits.reverse().map(function(v,i){
        if(i%2) {
            var temp = 2 * parseInt(v);
            if (temp > 9){
                // return temp.toString().split("").reduce(function(c,n){return parseInt(c) + parseInt(n);});
                  return temp - 9; //发生进位，数字和减9
            }
            else
                return temp;  //经常忘了else的处理
        }
        else {
            return parseInt(v); //经常忘了else的处理，这里出现两次这个错误，不应该。
        }
    }).reduce(function(c,n){return c + n;})%10;
 console.log(sum);
 return !sum;
}
{% endhighlight %}

*Best Practices*

{% highlight javascript %}
function validate(n){
  var sum = 0;

  while (n > 0) {
    var a = n % 10;
    n = Math.floor(n / 10);

    var b = (n % 10) * 2;
    n = Math.floor(n / 10);

    if (b > 9) {
      b -= 9;
    }

    sum += a + b;
  }

  return sum % 10 == 0;
}

///////////////////////////////////////////////
function validate(n) {
  n = n.toString().split('').map(Number).reverse(); //这里的map用的太好了，赞。
  return n.reduce(function (sum, digit, index) {
    if (index & 1) digit <<= 1;   // 通过与运算判断奇偶，位运算符来做乘法
    if (digit > 9) digit -= 9;    // 效果与下面的类似
    /////////////////////////////////
    // if (index % 2) digit *= 2; //
    // if (digit > 9) digit -= 9;  //
    /////////////////////////////////
    return sum + digit;
  }, 0) % 10 == 0;
}
{% endhighlight %}
